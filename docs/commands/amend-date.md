# ä¿®æ”¹æäº¤æ—¶é—´

ä¿®æ”¹æŒ‡å®š commit çš„æäº¤æ—¶é—´ï¼ˆAuthor Date å’Œ Committer Dateï¼‰ã€‚

## å‘½ä»¤

```bash
# äº¤äº’å¼é€‰æ‹© commit
gw amend:date
gw ad

# ç›´æ¥æŒ‡å®š commit hash
gw ad a1b2c3d
gw ad HEAD~2
```

## ä½¿ç”¨æ–¹å¼

### æ–¹å¼ 1: äº¤äº’å¼é€‰æ‹©ï¼ˆæ¨èï¼‰

ä¸å¸¦å‚æ•°è¿è¡Œï¼Œä»æœ€è¿‘ 20 ä¸ª commit ä¸­é€‰æ‹©ï¼š

```bash
gw ad
```

### æ–¹å¼ 2: æŒ‡å®š commit hash

ç›´æ¥æŒ‡å®šè¦ä¿®æ”¹çš„ commitï¼š

```bash
# ä½¿ç”¨çŸ­ hash
gw ad a1b2c3d

# ä½¿ç”¨å®Œæ•´ hash
gw ad a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0

# ä½¿ç”¨ç›¸å¯¹å¼•ç”¨
gw ad HEAD      # æœ€æ–° commit
gw ad HEAD~1    # ä¸Šä¸€ä¸ª commit
gw ad HEAD~2    # ä¸Šä¸Šä¸ª commit
```

## äº¤äº’æµç¨‹

### æ­¥éª¤ 1: é€‰æ‹© commitï¼ˆå¦‚æœæœªæŒ‡å®šï¼‰

```
? é€‰æ‹©è¦ä¿®æ”¹æ—¶é—´çš„ commit:
â¯ a1b2c3d âœ¨ feat(auth): æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½ 2026-01-19 14:30:00 +0800
  d4e5f6g ğŸ› fix(auth): ä¿®å¤ç™»å½•bug 2026-01-18 10:20:00 +0800
  h7i8j9k ğŸ“ docs: æ›´æ–°æ–‡æ¡£ 2026-01-17 16:45:00 +0800
  ...
```

### æ­¥éª¤ 2: æ˜¾ç¤ºå½“å‰ä¿¡æ¯

```
å½“å‰ commit ä¿¡æ¯:
  Hash:    a1b2c3d
  Message: âœ¨ feat(auth): æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½
  Date:    2026-01-19 14:30:00 +0800
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

### æ­¥éª¤ 3: è¾“å…¥æ–°æ—¥æœŸ

```
è¾“å…¥æ—¥æœŸæ ¼å¼: YYYY-MM-DD (å¦‚: 2026-01-19)

? è¾“å…¥æ–°çš„æ—¥æœŸ: 2026-01-15
```

**æ—¥æœŸæ ¼å¼**: `YYYY-MM-DD`ï¼Œæ—¶é—´é»˜è®¤ä¸º `00:00:00`

### æ­¥éª¤ 4: ç¡®è®¤ä¿®æ”¹

```
ä¿®æ”¹é¢„è§ˆ:
  Commit:   a1b2c3d
  æ—§æ—¶é—´:   2026-01-19 14:30:00 +0800
  æ–°æ—¶é—´:   2026-01-15 00:00:00
  ä¿®æ”¹ç±»å‹: Author + Committer (ä¸¤è€…éƒ½ä¿®æ”¹)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

? ç¡®è®¤ä¿®æ”¹? (y/N)
```

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: ä¿®æ”¹æœ€æ–° commit

```bash
gw ad HEAD
# æˆ–
gw ad

# è¾“å…¥æ—¥æœŸ: 2026-01-15
# ç¡®è®¤

âœ” ä¿®æ”¹æˆåŠŸ
```

**ç‰¹ç‚¹**: ä½¿ç”¨ `git commit --amend`ï¼Œä¸ä¼šæ”¹å˜ commit hash

### åœºæ™¯ 2: ä¿®æ”¹å†å² commit

```bash
gw ad HEAD~3

# è¾“å…¥æ—¥æœŸ: 2026-01-10
# ç¡®è®¤

âš ï¸  è­¦å‘Š: ä¿®æ”¹éæœ€æ–° commit éœ€è¦ä½¿ç”¨ rebaseï¼Œå¯èƒ½ä¼šæ”¹å˜ commit hash
   è¿™ä¼šå½±å“å·²æ¨é€åˆ°è¿œç¨‹çš„ commitï¼Œè¯·è°¨æ…æ“ä½œ

? ç¡®è®¤ä¿®æ”¹? (y/N) y

æ­£åœ¨æ‰§è¡Œ rebase...
âœ” ä¿®æ”¹æˆåŠŸ

âš ï¸  æ³¨æ„: commit hash å·²æ”¹å˜
   å¦‚æœå·²æ¨é€åˆ°è¿œç¨‹ï¼Œéœ€è¦ä½¿ç”¨ force push:
   git push --force-with-lease
```

**ç‰¹ç‚¹**: ä½¿ç”¨ `git filter-branch`ï¼Œä¼šæ”¹å˜ commit hash

### åœºæ™¯ 3: æ‰¹é‡ä¿®æ”¹å¤šä¸ª commit

```bash
# ä¿®æ”¹ç¬¬ä¸€ä¸ª
gw ad HEAD~2
# è¾“å…¥: 2026-01-10

# ä¿®æ”¹ç¬¬äºŒä¸ª
gw ad HEAD~1
# è¾“å…¥: 2026-01-11

# ä¿®æ”¹æœ€æ–°çš„
gw ad HEAD
# è¾“å…¥: 2026-01-12
```

## æ³¨æ„äº‹é¡¹

### âš ï¸ ä¿®æ”¹å†å² commit

- **ä¼šæ”¹å˜ commit hash** - æ‰€æœ‰åç»­ commit çš„ hash éƒ½ä¼šæ”¹å˜
- **å½±å“å›¢é˜Ÿåä½œ** - å¦‚æœå·²æ¨é€åˆ°è¿œç¨‹ï¼Œå…¶ä»–äººéœ€è¦é‡æ–°æ‹‰å–
- **éœ€è¦ force push** - æ¨é€æ—¶å¿…é¡»ä½¿ç”¨ `--force-with-lease`

### ï¿½ Foå‰rce Push

ä¿®æ”¹å·²æ¨é€çš„ commit åï¼Œéœ€è¦å¼ºåˆ¶æ¨é€ï¼š

```bash
# æ¨èï¼šæ›´å®‰å…¨çš„ force push
git push --force-with-lease

# æˆ–ï¼šå¼ºåˆ¶æ¨é€ï¼ˆä¸æ¨èï¼‰
git push --force
```

### ğŸ“… æ—¶é—´æ ¼å¼

- **è¾“å…¥æ ¼å¼**: `YYYY-MM-DD`ï¼ˆå¦‚ `2026-01-19`ï¼‰
- **å­˜å‚¨æ ¼å¼**: `YYYY-MM-DD 00:00:00`ï¼ˆæ—¶é—´é»˜è®¤ä¸º 00:00:00ï¼‰
- **æ—¶åŒº**: ä½¿ç”¨ç³»ç»Ÿå½“å‰æ—¶åŒº

### ğŸ”„ ä¿®æ”¹èŒƒå›´

é»˜è®¤åŒæ—¶ä¿®æ”¹ï¼š

- **Author Date**: ä»£ç ç¼–å†™æ—¶é—´
- **Committer Date**: ä»£ç æäº¤æ—¶é—´

## ç¤ºä¾‹

### ç¤ºä¾‹ 1: ä¿®æ”¹æœ€æ–° commit ä¸ºæŒ‡å®šæ—¥æœŸ

```bash
$ gw ad HEAD
è¾“å…¥æ–°çš„æ—¥æœŸ: 2026-01-15
ç¡®è®¤ä¿®æ”¹? y

âœ” ä¿®æ”¹æˆåŠŸ
```

### ç¤ºä¾‹ 2: ä¿®æ”¹æŒ‡å®š hash çš„ commit

```bash
$ gw ad a1b2c3d
è¾“å…¥æ–°çš„æ—¥æœŸ: 2026-01-10
ç¡®è®¤ä¿®æ”¹? y

âš ï¸  è­¦å‘Š: ä¿®æ”¹éæœ€æ–° commit éœ€è¦ä½¿ç”¨ rebaseï¼Œå¯èƒ½ä¼šæ”¹å˜ commit hash
æ­£åœ¨æ‰§è¡Œ rebase...
âœ” ä¿®æ”¹æˆåŠŸ
```

### ç¤ºä¾‹ 3: äº¤äº’å¼é€‰æ‹©å¹¶ä¿®æ”¹

```bash
$ gw ad

? é€‰æ‹©è¦ä¿®æ”¹æ—¶é—´çš„ commit:
â¯ a1b2c3d âœ¨ feat: æ·»åŠ ç™»å½•åŠŸèƒ½ 2026-01-19 14:30:00
  d4e5f6g ğŸ› fix: ä¿®å¤bug 2026-01-18 10:20:00

è¾“å…¥æ–°çš„æ—¥æœŸ: 2026-01-15
ç¡®è®¤ä¿®æ”¹? y

âœ” ä¿®æ”¹æˆåŠŸ
```

## ç›¸å…³å‘½ä»¤

- `gw c` - æäº¤ä»£ç 
- `gw log` - æŸ¥çœ‹æäº¤æ—¥å¿—
- `git log --format="%ai"` - æŸ¥çœ‹ Author Date
- `git log --format="%ci"` - æŸ¥çœ‹ Committer Date

## æŠ€æœ¯ç»†èŠ‚

### Author Date vs Committer Date

Git ä¸­æ¯ä¸ª commit éƒ½æœ‰ä¸¤ä¸ªæ—¶é—´æˆ³ï¼š

#### ğŸ“ Author Date (ä½œè€…æ—¶é—´)

- **å«ä¹‰**: ä»£ç å®é™…ç¼–å†™çš„æ—¶é—´
- **è®¾ç½®æ—¶æœº**: ç¬¬ä¸€æ¬¡åˆ›å»º commit æ—¶
- **ä¿æŒä¸å˜**: å³ä½¿ rebaseã€cherry-pick ä¹Ÿä¼šä¿ç•™åŸå§‹ä½œè€…æ—¶é—´
- **æŸ¥çœ‹å‘½ä»¤**: `git log --format="%ai"`

**ç¤ºä¾‹åœºæ™¯**:

```bash
# 2026-01-15 ä½ å†™äº†ä»£ç å¹¶æäº¤
git commit -m "feat: æ·»åŠ ç™»å½•åŠŸèƒ½"
# Author Date: 2026-01-15 10:00:00

# 2026-01-20 ä½  rebase äº†è¿™ä¸ª commit
git rebase -i HEAD~5
# Author Date: ä»ç„¶æ˜¯ 2026-01-15 10:00:00 (ä¸å˜)
# Committer Date: 2026-01-20 14:30:00 (æ›´æ–°ä¸º rebase æ—¶é—´)
```

#### ğŸ“¦ Committer Date (æäº¤æ—¶é—´)

- **å«ä¹‰**: ä»£ç æœ€åä¸€æ¬¡è¢«æäº¤åˆ°ä»“åº“çš„æ—¶é—´
- **è®¾ç½®æ—¶æœº**: æ¯æ¬¡ commitã€amendã€rebaseã€cherry-pick æ—¶
- **ä¼šæ›´æ–°**: ä»»ä½•ä¿®æ”¹ commit çš„æ“ä½œéƒ½ä¼šæ›´æ–°è¿™ä¸ªæ—¶é—´
- **æŸ¥çœ‹å‘½ä»¤**: `git log --format="%ci"`

**ç¤ºä¾‹åœºæ™¯**:

```bash
# åŸå§‹æäº¤
git commit -m "feat: æ·»åŠ ç™»å½•åŠŸèƒ½"
# Author Date: 2026-01-15 10:00:00
# Committer Date: 2026-01-15 10:00:00

# ä¿®æ”¹ commit message
git commit --amend -m "feat(auth): æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½"
# Author Date: 2026-01-15 10:00:00 (ä¸å˜)
# Committer Date: 2026-01-15 10:30:00 (æ›´æ–°)

# å†æ¬¡ä¿®æ”¹
git commit --amend --no-edit
# Author Date: 2026-01-15 10:00:00 (ä¸å˜)
# Committer Date: 2026-01-15 11:00:00 (å†æ¬¡æ›´æ–°)
```

### ğŸ”„ ä¸¤è€…çš„å…³ç³»

| æ“ä½œ                 | Author Date        | Committer Date     |
| -------------------- | ------------------ | ------------------ |
| `git commit`         | è®¾ç½®ä¸ºå½“å‰æ—¶é—´     | è®¾ç½®ä¸ºå½“å‰æ—¶é—´     |
| `git commit --amend` | ä¿æŒä¸å˜           | æ›´æ–°ä¸ºå½“å‰æ—¶é—´     |
| `git rebase`         | ä¿æŒä¸å˜           | æ›´æ–°ä¸ºå½“å‰æ—¶é—´     |
| `git cherry-pick`    | ä¿æŒåŸ commit æ—¶é—´ | è®¾ç½®ä¸ºå½“å‰æ—¶é—´     |
| `git merge`          | ä¿æŒåŸ commit æ—¶é—´ | ä¿æŒåŸ commit æ—¶é—´ |

### ğŸ¯ ä¸ºä»€ä¹ˆè¦åŒæ—¶ä¿®æ”¹ä¸¤è€…ï¼Ÿ

åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™ä¸¤ä¸ªæ—¶é—´ä¿æŒä¸€è‡´ï¼Œå› ä¸ºï¼š

1. **ç®€åŒ–ç†è§£**: é¿å…æ··æ·†ï¼Œä¸€ä¸ª commit åªæœ‰ä¸€ä¸ªæ—¶é—´
2. **å†å²æ¸…æ™°**: æäº¤å†å²æ›´å®¹æ˜“ç†è§£å’Œè¿½æº¯
3. **é¿å…è¯¯å¯¼**: é˜²æ­¢å‡ºç°"ä½œè€…æ—¶é—´æ˜¯æ˜¨å¤©ï¼Œä½†æäº¤æ—¶é—´æ˜¯ä»Šå¤©"çš„å›°æƒ‘

**æœ¬å‘½ä»¤é»˜è®¤åŒæ—¶ä¿®æ”¹ä¸¤è€…**ï¼Œç¡®ä¿æ—¶é—´ä¸€è‡´æ€§ã€‚

### ğŸ“Š æŸ¥çœ‹ä¸¤ä¸ªæ—¶é—´

```bash
# æŸ¥çœ‹ Author Date
git log --format="%ai %s"
# è¾“å‡º: 2026-01-15 10:00:00 +0800 feat: æ·»åŠ ç™»å½•åŠŸèƒ½

# æŸ¥çœ‹ Committer Date
git log --format="%ci %s"
# è¾“å‡º: 2026-01-15 10:00:00 +0800 feat: æ·»åŠ ç™»å½•åŠŸèƒ½

# åŒæ—¶æŸ¥çœ‹ä¸¤è€…
git log --format="Author: %ai | Committer: %ci | %s"
# è¾“å‡º: Author: 2026-01-15 10:00:00 +0800 | Committer: 2026-01-15 10:00:00 +0800 | feat: æ·»åŠ ç™»å½•åŠŸèƒ½

# ä½¿ç”¨ gw log æŸ¥çœ‹ï¼ˆæ›´å‹å¥½ï¼‰
gw log
```

### å®ç°æ–¹å¼

**æœ€æ–° commit**:

```bash
GIT_AUTHOR_DATE="2026-01-15 00:00:00" \
GIT_COMMITTER_DATE="2026-01-15 00:00:00" \
git commit --amend --no-edit
```

**å†å² commit**:

```bash
git filter-branch -f --env-filter '
  if [ "$GIT_COMMIT" = "commit-hash" ]; then
    export GIT_AUTHOR_DATE="2026-01-15 00:00:00"
    export GIT_COMMITTER_DATE="2026-01-15 00:00:00"
  fi
' parent-hash..HEAD
```

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆ Git è¦æœ‰ä¸¤ä¸ªæ—¶é—´ï¼Ÿ

A: è¿™æ˜¯ä¸ºäº†åŒºåˆ†"è°å†™çš„ä»£ç "å’Œ"è°æäº¤çš„ä»£ç "ã€‚åœ¨å›¢é˜Ÿåä½œä¸­å¾ˆæœ‰ç”¨ï¼š

**åœºæ™¯ 1: ä»£ç å®¡æŸ¥**

```bash
# å°æ˜å†™äº†ä»£ç 
git commit -m "feat: æ·»åŠ åŠŸèƒ½"
# Author: å°æ˜, Author Date: 2026-01-15

# å°çº¢å®¡æŸ¥ååˆå¹¶ï¼ˆä½¿ç”¨ cherry-pickï¼‰
git cherry-pick abc123
# Author: å°æ˜, Author Date: 2026-01-15 (ä¿ç•™åŸä½œè€…)
# Committer: å°çº¢, Committer Date: 2026-01-16 (è®°å½•åˆå¹¶è€…)
```

**åœºæ™¯ 2: è¡¥ä¸åº”ç”¨**

```bash
# å¼€æºé¡¹ç›®æ”¶åˆ°è´¡çŒ®è€…çš„è¡¥ä¸
git am < patch.diff
# Author: è´¡çŒ®è€…, Author Date: è¡¥ä¸åˆ›å»ºæ—¶é—´
# Committer: ç»´æŠ¤è€…, Committer Date: åº”ç”¨è¡¥ä¸æ—¶é—´
```

### Q: ä¸ºä»€ä¹ˆæ—¶é—´æ˜¯ 00:00:00ï¼Ÿ

A: ä¸ºäº†ç®€åŒ–æ“ä½œï¼Œåªéœ€è¦è¾“å…¥æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œæ—¶é—´é»˜è®¤ä¸º 00:00:00ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªå…³å¿ƒæ—¥æœŸï¼Œä¸éœ€è¦ç²¾ç¡®åˆ°ç§’ã€‚

### Q: å¯ä»¥ä¿®æ”¹æ—¶é—´éƒ¨åˆ†å—ï¼Ÿ

A: å½“å‰ç‰ˆæœ¬åªæ”¯æŒä¿®æ”¹æ—¥æœŸï¼Œæ—¶é—´å›ºå®šä¸º 00:00:00ã€‚å¦‚éœ€ç²¾ç¡®æ—¶é—´ï¼Œå¯ä»¥æ‰‹åŠ¨ä½¿ç”¨ git å‘½ä»¤ï¼š

```bash
# ä¿®æ”¹æœ€æ–° commit çš„æ—¶é—´ä¸ºæŒ‡å®šçš„ç²¾ç¡®æ—¶é—´
GIT_AUTHOR_DATE="2026-01-15 14:30:00" \
GIT_COMMITTER_DATE="2026-01-15 14:30:00" \
git commit --amend --no-edit
```

### Q: ä»€ä¹ˆæ—¶å€™ä¸¤ä¸ªæ—¶é—´ä¼šä¸ä¸€è‡´ï¼Ÿ

A: ä»¥ä¸‹æ“ä½œä¼šå¯¼è‡´ä¸¤ä¸ªæ—¶é—´ä¸ä¸€è‡´ï¼š

1. **ä¿®æ”¹ commit**: `git commit --amend` ä¼šæ›´æ–° Committer Date
2. **Rebase**: `git rebase` ä¼šæ›´æ–°æ‰€æœ‰ commit çš„ Committer Date
3. **Cherry-pick**: `git cherry-pick` ä¼šä¿ç•™ Author Dateï¼Œä½†è®¾ç½®æ–°çš„ Committer Date
4. **æ‰‹åŠ¨ä¿®æ”¹**: ä½¿ç”¨ç¯å¢ƒå˜é‡å•ç‹¬ä¿®æ”¹æŸä¸ªæ—¶é—´

**ç¤ºä¾‹**:

```bash
# åŸå§‹ commit
git commit -m "feat: åŠŸèƒ½"
# Author Date: 2026-01-15 10:00:00
# Committer Date: 2026-01-15 10:00:00

# ä¿®æ”¹ commit message
git commit --amend -m "feat: æ–°åŠŸèƒ½"
# Author Date: 2026-01-15 10:00:00 (ä¸å˜)
# Committer Date: 2026-01-15 11:00:00 (æ›´æ–°)
```

### Q: ä¸ºä»€ä¹ˆæœ¬å‘½ä»¤è¦åŒæ—¶ä¿®æ”¹ä¸¤è€…ï¼Ÿ

A: ä¿æŒæ—¶é—´ä¸€è‡´æ€§ï¼Œé¿å…æ··æ·†ã€‚å¦‚æœä½ éœ€è¦å•ç‹¬ä¿®æ”¹æŸä¸ªæ—¶é—´ï¼Œå¯ä»¥ä½¿ç”¨åŸç”Ÿ git å‘½ä»¤ï¼š

```bash
# åªä¿®æ”¹ Author Date
GIT_AUTHOR_DATE="2026-01-15 00:00:00" git commit --amend --no-edit

# åªä¿®æ”¹ Committer Date
GIT_COMMITTER_DATE="2026-01-15 00:00:00" git commit --amend --no-edit
```

### Q: ä¿®æ”¹åå¦‚ä½•éªŒè¯ï¼Ÿ

A: ä½¿ç”¨ `gw log` æˆ– `git log` æŸ¥çœ‹æäº¤å†å²ï¼Œç¡®è®¤æ—¶é—´å·²æ›´æ–°ã€‚

### Q: ä¿®æ”¹å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

A: å¦‚æœä¿®æ”¹å†å² commit å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨ `git reflog` æ‰¾å›ä¹‹å‰çš„çŠ¶æ€ï¼š

```bash
git reflog
git reset --hard HEAD@{1}
```
