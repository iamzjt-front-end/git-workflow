#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# 运行测试
echo "正在运行测试..."
npm test

# 检查测试结果
if [ $? -ne 0 ]; then
  echo ""
  echo "⚠️  测试失败！"
  echo "你可以："
  echo "1. 修复测试后重新提交"
  echo "2. 使用 git commit --no-verify 跳过测试"
  echo ""
  exit 1
fi

echo "✅ 测试通过，继续提交..."

# 确保正常退出，让 Git 继续提交过程
exit 0